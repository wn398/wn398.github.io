
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>SQL综合整理 | 自由之翼</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Tim Wang">
    
    <meta name="description" content="SQL语言分为三部分:
数据定义语言  (Data Definition Language) DDL
数据操作语言   (Data Manipulation Language)DML
数据控制语言  （Data Control Language）DCL

数据定义语言DDL创建数据库create d">
    
    
    <meta name="description" content="SQL语言分为三部分:
数据定义语言  (Data Definition Language) DDL
数据操作语言   (Data Manipulation Language)DML
数据控制语言  （Data Control Language）DCL

数据定义语言DDL创建数据库create database name;
删除数据库drop database name;
创建数据库表crea">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL综合整理">
<meta property="og:url" content="http://wn398.github.io/2012/10/18/database/SQL综合整理/index.html">
<meta property="og:site_name" content="自由之翼">
<meta property="og:description" content="SQL语言分为三部分:
数据定义语言  (Data Definition Language) DDL
数据操作语言   (Data Manipulation Language)DML
数据控制语言  （Data Control Language）DCL

数据定义语言DDL创建数据库create database name;
删除数据库drop database name;
创建数据库表crea">
<meta property="og:updated_time" content="2015-03-19T05:52:05.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQL综合整理">
<meta name="twitter:description" content="SQL语言分为三部分:
数据定义语言  (Data Definition Language) DDL
数据操作语言   (Data Manipulation Language)DML
数据控制语言  （Data Control Language）DCL

数据定义语言DDL创建数据库create database name;
删除数据库drop database name;
创建数据库表crea">
<meta name="twitter:creator" content="@wn1698">
<link rel="publisher" href="108412565662276580000">

    
    <link rel="alternative" href="/atom.xml" title="自由之翼" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="自由之翼" title="自由之翼"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="自由之翼">自由之翼</a></h1>
				<h2 class="blog-motto">The perfect day Going to bed with a dream ,waking up with a purpose</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
					<li>
 					
						<form class="search" action="http://zhannei.baidu.com/cse/search" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2012/10/18/database/SQL综合整理/" title="SQL综合整理" itemprop="url">SQL综合整理</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/108412565662276580000?rel=author" title="Tim Wang" target="_blank" itemprop="author">Tim Wang</a>
		
  <p class="article-time">
    <time datetime="2012-10-18T05:28:14.000Z" itemprop="datePublished"> 发表于 2012-10-18</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#数据定义语言DDL"><span class="toc-number">1.</span> <span class="toc-text">数据定义语言DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建数据库"><span class="toc-number">1.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除数据库"><span class="toc-number">1.2.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建数据库表"><span class="toc-number">1.3.</span> <span class="toc-text">创建数据库表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#外键"><span class="toc-number">1.3.1.</span> <span class="toc-text">外键</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看表结构"><span class="toc-number">1.4.</span> <span class="toc-text">查看表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看表的详细定义"><span class="toc-number">1.5.</span> <span class="toc-text">查看表的详细定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改表结构"><span class="toc-number">1.6.</span> <span class="toc-text">修改表结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表名"><span class="toc-number">1.6.1.</span> <span class="toc-text">修改表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表字段数据类型"><span class="toc-number">1.6.2.</span> <span class="toc-text">修改表字段数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表字段名称"><span class="toc-number">1.6.3.</span> <span class="toc-text">修改表字段名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为表添加新字段"><span class="toc-number">1.6.4.</span> <span class="toc-text">为表添加新字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除字段"><span class="toc-number">1.6.5.</span> <span class="toc-text">删除字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改字段的排列位置"><span class="toc-number">1.6.6.</span> <span class="toc-text">修改字段的排列位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表的存储引擎"><span class="toc-number">1.6.7.</span> <span class="toc-text">修改表的存储引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除表的外键约束"><span class="toc-number">1.6.8.</span> <span class="toc-text">删除表的外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除表"><span class="toc-number">1.6.9.</span> <span class="toc-text">删除表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#索引"><span class="toc-number">1.7.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建索引"><span class="toc-number">1.7.1.</span> <span class="toc-text">创建索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表时直接创建索引"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">创建表时直接创建索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在存在的表上创建索引"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">在存在的表上创建索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用alter_table_语句来创建索引"><span class="toc-number">1.7.1.3.</span> <span class="toc-text">使用alter table 语句来创建索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除索引"><span class="toc-number">1.7.2.</span> <span class="toc-text">删除索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图"><span class="toc-number">1.8.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建视图"><span class="toc-number">1.8.1.</span> <span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看视图"><span class="toc-number">1.8.2.</span> <span class="toc-text">查看视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改视图"><span class="toc-number">1.8.3.</span> <span class="toc-text">修改视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新视图"><span class="toc-number">1.8.4.</span> <span class="toc-text">更新视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不能更新的视图分类："><span class="toc-number">1.8.5.</span> <span class="toc-text">不能更新的视图分类：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除视图"><span class="toc-number">1.8.6.</span> <span class="toc-text">删除视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#触发器"><span class="toc-number">1.9.</span> <span class="toc-text">触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建触发器"><span class="toc-number">1.9.1.</span> <span class="toc-text">创建触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看触发器"><span class="toc-number">1.9.2.</span> <span class="toc-text">查看触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#触发器的使用"><span class="toc-number">1.9.3.</span> <span class="toc-text">触发器的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除触发器"><span class="toc-number">1.9.4.</span> <span class="toc-text">删除触发器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据操作语言DML"><span class="toc-number">2.</span> <span class="toc-text">数据操作语言DML</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据查询"><span class="toc-number">2.1.</span> <span class="toc-text">数据查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查询语句的基本语法"><span class="toc-number">2.1.1.</span> <span class="toc-text">查询语句的基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在单表上查询数据"><span class="toc-number">2.1.2.</span> <span class="toc-text">在单表上查询数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用聚合函数查询数据"><span class="toc-number">2.1.3.</span> <span class="toc-text">使用聚合函数查询数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多表上联合查询"><span class="toc-number">2.1.4.</span> <span class="toc-text">多表上联合查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#内连接查询"><span class="toc-number">2.1.4.1.</span> <span class="toc-text">内连接查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#外连接查询"><span class="toc-number">2.1.4.2.</span> <span class="toc-text">外连接查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#复合条件查询"><span class="toc-number">2.1.4.3.</span> <span class="toc-text">复合条件查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#子查询"><span class="toc-number">2.1.5.</span> <span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用正则表达式查询"><span class="toc-number">2.1.6.</span> <span class="toc-text">使用正则表达式查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询综合实例"><span class="toc-number">2.1.7.</span> <span class="toc-text">查询综合实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#插入数据"><span class="toc-number">2.2.</span> <span class="toc-text">插入数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更新数据"><span class="toc-number">2.3.</span> <span class="toc-text">更新数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#存储过程和函数"><span class="toc-number">2.4.</span> <span class="toc-text">存储过程和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建存储过程"><span class="toc-number">2.4.1.</span> <span class="toc-text">创建存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建存储函数"><span class="toc-number">2.4.2.</span> <span class="toc-text">创建存储函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变量的使用"><span class="toc-number">2.4.3.</span> <span class="toc-text">变量的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义条件和处理程序"><span class="toc-number">2.4.4.</span> <span class="toc-text">定义条件和处理程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#光标的使用"><span class="toc-number">2.4.5.</span> <span class="toc-text">光标的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#流程控制的使用"><span class="toc-number">2.4.6.</span> <span class="toc-text">流程控制的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#调用存储过程和函数"><span class="toc-number">2.4.7.</span> <span class="toc-text">调用存储过程和函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看存储过程和函数"><span class="toc-number">2.4.8.</span> <span class="toc-text">查看存储过程和函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改存储过程和函数"><span class="toc-number">2.4.9.</span> <span class="toc-text">修改存储过程和函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除存储过程和函数"><span class="toc-number">2.4.10.</span> <span class="toc-text">删除存储过程和函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除数据"><span class="toc-number">2.5.</span> <span class="toc-text">删除数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据控制语言DCL"><span class="toc-number">3.</span> <span class="toc-text">数据控制语言DCL</span></a></li></ol>
		
		</div>
		
		<blockquote>
<p>SQL语言分为三部分:</p>
<pre><code>数据定义语言  (Data <span class="keyword">Definition</span> <span class="keyword">Language</span>) DDL
数据操作语言   (Data Manipulation <span class="keyword">Language</span>)DML
数据控制语言  （Data <span class="keyword">Control</span> <span class="keyword">Language</span>）DCL
</code></pre></blockquote>
<h1 id="数据定义语言DDL">数据定义语言DDL</h1><h2 id="创建数据库">创建数据库</h2><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create database name;</div></pre></td></tr></table></figure>
<h2 id="删除数据库">删除数据库</h2><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">drop database name;</div></pre></td></tr></table></figure>
<h2 id="创建数据库表">创建数据库表</h2><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create table table_name(属性名  数据类型[完整性约束条件],</div><div class="line">	属性名 数据类型[完整性约束条件],</div><div class="line">	...</div><div class="line">	属性名 数据类型);</div></pre></td></tr></table></figure>
<blockquote>
<p>完整性约束条件包括：</p>
<pre><code><span class="title">primary</span> key   主键
<span class="foreign"><span class="keyword">foreign</span> key   外键</span>
<span class="title">not</span> null      不能为空
<span class="title">unique</span>         唯一
<span class="title">auto_increament</span>自增长
<span class="default"><span class="keyword">default</span> 为属性设置默认值  </span>
</code></pre></blockquote>
<p>例1： 创建单字段主键</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> example1(
    stu_id <span class="built_in">int</span> <span class="keyword">primary</span> <span class="keyword">key</span>,
    stu_name <span class="built_in">varchar</span>(<span class="number">20</span>),
    stu_sex <span class="built_in">boolean</span>
    );</span>
</code></pre><p>例2: 创建多字段主键</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> exampel2(
    stu_id <span class="built_in">int</span>,
    course_id <span class="built_in">int</span>,
    grade <span class="built_in">float</span>,
    <span class="keyword">primary</span> <span class="keyword">key</span>(stu_id,course_id)
    );</span>
</code></pre><h3 id="外键">外键</h3><p>设置外键的语法规则：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">constraint 外键名 foreign key(属性1.1，属性1.2，...,属性1.n)</div><div class="line">                   references 表名(属性2.1，属性2.2，...,属性2.n)</div></pre></td></tr></table></figure></p>
<p>例3： 创建含有外键的表：</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> example3(
    id <span class="built_in">int</span> <span class="keyword">primary</span> <span class="keyword">key</span>,
    stu_id <span class="built_in">int</span>,
    course_id <span class="built_in">int</span>,
    <span class="keyword">constraint</span> c_fk <span class="keyword">foreign</span> <span class="keyword">key</span>(stu_id,course_id) <span class="keyword">references</span> example2(stu_id,course_id)
    );</span>
</code></pre><p>例4： 非空约束表</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> example4(
    id <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">primary</span> <span class="keyword">key</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,
    stu_id <span class="built_in">int</span>,
    <span class="keyword">constraint</span> d_fk <span class="keyword">foreign</span> <span class="keyword">key</span>(stu_id) <span class="keyword">references</span> example1(stu_id)
    );</span>
</code></pre><p>例5： 唯一性约束</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> example5(
    id <span class="built_in">int</span> <span class="keyword">primary</span> <span class="keyword">key</span>,
    stu_id <span class="built_in">int</span> <span class="keyword">unique</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>
    );</span>
</code></pre><p>例6： 自动增长 auto_increment 默认从1开始</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> example6(
    id <span class="built_in">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,
    stu_id <span class="built_in">int</span> <span class="keyword">unique</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>
    );</span>
</code></pre><p>例7： 默认值</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> example7(
    id <span class="built_in">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,
    stu_id <span class="built_in">int</span> <span class="keyword">unique</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,
    English <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">'zero'</span>,
    Math <span class="built_in">float</span> <span class="keyword">default</span> <span class="number">0</span>,
    Computer <span class="built_in">float</span> <span class="keyword">default</span> <span class="number">0</span>
    );</span>
</code></pre><h2 id="查看表结构">查看表结构</h2><blockquote>
<p>查看表结构的字段数据类型，是否为空值，主键等：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">describe 表名 //可以缩写为  desc 表名</div></pre></td></tr></table></figure>
<h2 id="查看表的详细定义">查看表的详细定义</h2><blockquote>
<p>查出建表语句</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">show create table table_name;</div></pre></td></tr></table></figure>
<h2 id="修改表结构">修改表结构</h2><h3 id="修改表名">修改表名</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 旧表名 rename [to] 新表名;</div></pre></td></tr></table></figure>
<p>例8：<code>alter table example0 rename user;</code></p>
<h3 id="修改表字段数据类型">修改表字段数据类型</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 表名 modify 属性名 数据类型;</div></pre></td></tr></table></figure>
<p>例9： <code>alter table user modify name varchar(30);</code></p>
<h3 id="修改表字段名称">修改表字段名称</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 表名 change 旧属性名 新属性名 新数据类型</div></pre></td></tr></table></figure>
<p>例10：</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> example1 <span class="keyword">change</span> stu_name name <span class="built_in">varchar</span>(<span class="number">20</span>);</span>修改字段名
<span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> example1 <span class="keyword">change</span> stu_sex sex <span class="built_in">int</span>(<span class="number">2</span>);</span>修改字段名与长度
</code></pre><h3 id="为表添加新字段">为表添加新字段</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 表名 add 属性名1 数据类型[完整性约束条件][first | after 属性名2];</div></pre></td></tr></table></figure>
<p>例11：</p>
<ol>
<li><p>增加无完整性约束条件的字段</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> phone <span class="built_in">varchar</span>(<span class="number">20</span>);</span>
</code></pre></li>
<li><p>增加有完整性约束条件的字段</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> age <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="literal">null</span>;</span>
</code></pre></li>
<li><p>增加放并放到第一个位置</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> num <span class="built_in">int</span>(<span class="number">8</span>) <span class="keyword">primary</span> <span class="keyword">key</span> <span class="keyword">first</span>;</span>
</code></pre></li>
<li><p>增加字段并放到指定字段后面</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> address <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">after</span> phone;</span>
</code></pre></li>
</ol>
<h3 id="删除字段">删除字段</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 表名 drop 属性名;</div></pre></td></tr></table></figure>
<p>例12：</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">drop</span> id;</span>
</code></pre><h3 id="修改字段的排列位置">修改字段的排列位置</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 表名 modify 属性名1 数据类型 first|after 属性名2;</div></pre></td></tr></table></figure>
<p>例13:</p>
<ol>
<li><p>字段修改到第一个位置</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> modify name <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">first</span>;</span>
</code></pre></li>
<li><p>把一个字段放到另一个字段后面</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> modify sex tinyint(<span class="number">1</span>）<span class="keyword">after</span> age;</span>
</code></pre></li>
</ol>
<h3 id="修改表的存储引擎">修改表的存储引擎</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 表名 engine=存储引擎名</div></pre></td></tr></table></figure>
<p>例14：</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">engine</span>=myisam;</span>
</code></pre><h3 id="删除表的外键约束">删除表的外键约束</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 表名 drop foreign key 外键别名;</div></pre></td></tr></table></figure>
<p>例15：</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> example3 <span class="keyword">drop</span> <span class="keyword">foreign</span> <span class="keyword">key</span> c_fk;</span>
</code></pre><h3 id="删除表">删除表</h3><ol>
<li><p>删除没有被关联的表</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">drop table 表名;</div></pre></td></tr></table></figure>
</li>
<li><p>删除被其它表关联的表</p>
<blockquote>
<p>先删除关联外键再删除表</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table example4 drop foreign key d_fk;</div><div class="line">drop table example1;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h2 id="索引">索引</h2><blockquote>
<p>索引是一种特殊的数据库结构，可以用来快速查询数据库表中的特定记录，提高对表中数据的查询速度.索引是由数据库中的一列或多列组成</p>
<p>索引优点：</p>
<blockquote>
<p>可以提高检索速度，对于有依赖关系的子表和父表之间联合查询时，可以提高查询速度</p>
</blockquote>
<p>索引缺点：</p>
<blockquote>
<p>创建和维护索引需要耗费时间，耗费时间的数量随着数据量的增加而增加，它需要占用物理空间，每一个索引要占一定的物理空间：增加，删除和修改数据时，都要进行维护索引，造成数据的维护速度降低了。</p>
</blockquote>
<p>索引分类:</p>
<ol>
<li>普通索引  创建时不附加任何限制条件，其值是否唯一和非空由字段本身决定</li>
<li>惟一性索引  创建时限定值是惟一的</li>
<li>全文索引  通过全文索引可以快速查询数据量较大的类型字段</li>
<li>单列索引  在单个字段上创建索引</li>
<li>多列索引  该索引指向创建时对应的多个字段 id,name,sex建一个索引 查询时只有使用id才能使用索引</li>
<li>空间索引 只能建立在空间数据库上.空间类型包括 Geometry point, linestring.polygon等 目前只有myISAM存储引擎支持空间检索 很少用到</li>
</ol>
<p>索引设计原则：</p>
<ol>
<li>选择惟一性索引</li>
<li>为经常需要排序，分组和联合操作的字段建立索引,为其建立索引可以有效地避免排序操作</li>
<li>为常作为查询条件的字段建立索引</li>
<li>限制索引的数目</li>
<li>尽量使用数据量少的索引</li>
<li>尽量使用前缀来索引</li>
<li>删除不再使用或者很少使用的索引</li>
</ol>
</blockquote>
<h3 id="创建索引">创建索引</h3><h4 id="创建表时直接创建索引">创建表时直接创建索引</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create table 表名 （属性名 数据类型[完整性约束]，</div><div class="line">   属性名 数据类型[完整性约束条件],创建索引]</div></pre></td></tr></table></figure>
<p>例16</p>
<ol>
<li><p>创建普通索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index1(
    id <span class="built_in">int</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>),
    sex <span class="built_in">boolean</span>,
    <span class="keyword">index</span>(id)
    );</span>
</code></pre></li>
<li><p>创建唯一性索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index2(
    id <span class="built_in">int</span> <span class="keyword">unique</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>),
    <span class="keyword">unique</span> <span class="keyword">index</span> index2_id (id <span class="keyword">asc</span>)
    );</span>
</code></pre></li>
<li><p>创建全文索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index3(
    id <span class="built_in">int</span>,
    info <span class="built_in">varchar</span>(<span class="number">20</span>),
    fulltext <span class="keyword">index</span> index3_info(info)
    )<span class="keyword">engine</span>=myisam;</span>
</code></pre></li>
<li><p>创建单列索引  长度为10，只使用它的前10个字符来检索</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index4(
    id <span class="built_in">int</span>,
    subject <span class="built_in">varchar</span>(<span class="number">30</span>),
    <span class="keyword">index</span> index_st(subject(<span class="number">10</span>))
    );</span>
</code></pre></li>
<li><p>创建多列索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index5(
    id <span class="built_in">int</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>),
    sex <span class="built_in">char</span>(<span class="number">4</span>),
    <span class="keyword">index</span> index5 (name,sex)
    );</span>
</code></pre></li>
<li><p>创建空间索引,要求相应的存储引擎</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index6(
   id <span class="built_in">int</span>,
   <span class="keyword">space</span> geometry <span class="keyword">not</span> <span class="literal">null</span>,
   spatial <span class="keyword">index</span> index6_sp(<span class="keyword">space</span>)
   )<span class="keyword">engine</span>=myisam;</span>
</code></pre></li>
</ol>
<h4 id="在存在的表上创建索引">在存在的表上创建索引</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create [unique|fulltext|spatial] index 索引名 on 表名（属性名[(长度)][asc|desc]);</div></pre></td></tr></table></figure>
<p>例17</p>
<ol>
<li><p>创建普通索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">index</span> index7_id <span class="keyword">on</span> <span class="keyword">user</span>(name);</span>
</code></pre></li>
<li><p>创建唯一性索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index8(
    id <span class="built_in">int</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>)
    );</span>

<span class="operator"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> index8_id <span class="keyword">on</span> index8(id);</span>
</code></pre></li>
<li><p>创建全文索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index9(
    id <span class="built_in">int</span>,
    info <span class="built_in">varchar</span>(<span class="number">50</span>)
    )<span class="keyword">engine</span>=myisam;</span>

<span class="operator"><span class="keyword">create</span> fulltext <span class="keyword">index</span> index9_info <span class="keyword">on</span> index9(info);</span>
</code></pre></li>
<li><p>创建单列索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index10(
    id <span class="built_in">int</span>,
    address <span class="built_in">varchar</span>(<span class="number">20</span>)
    );</span>

<span class="operator"><span class="keyword">create</span> <span class="keyword">index</span> index10_addr <span class="keyword">on</span> index10(address(<span class="number">4</span>));</span>
</code></pre></li>
<li><p>多列索引</p>
<pre><code> <span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index11(
     id <span class="built_in">int</span>,
     name <span class="built_in">varchar</span>(<span class="number">20</span>),
     address <span class="built_in">varchar</span>(<span class="number">50</span>)
     );</span>

<span class="operator"><span class="keyword">create</span> <span class="keyword">index</span> index11_na <span class="keyword">on</span> index11(name,address);</span>
</code></pre></li>
<li><p>空间索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index12(
    id <span class="built_in">int</span>,
    line geometry <span class="keyword">not</span> <span class="literal">null</span>
    )<span class="keyword">engine</span>=myisam;</span>

<span class="operator"><span class="keyword">create</span> spatial <span class="keyword">index</span> index12_line <span class="keyword">on</span> index12(line);</span>
</code></pre></li>
</ol>
<h4 id="使用alter_table_语句来创建索引">使用alter table 语句来创建索引</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter table 表名 add [unique|fulltext|spatial] index</div><div class="line">            索引名 （属性名[(长度)][asc|desc]）;</div></pre></td></tr></table></figure>
<p>例18</p>
<ol>
<li><p>创建普通索引</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> <span class="keyword">index</span> index12_name(name(<span class="number">20</span>));</span>
</code></pre></li>
<li><p>创建唯一性索引</p>
<pre><code> <span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index14(
     id <span class="built_in">int</span>,
     name <span class="built_in">varchar</span>(<span class="number">20</span>)
     );</span>

<span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> index14 <span class="keyword">add</span> <span class="keyword">unique</span> <span class="keyword">index</span> index14_id(id);</span>
</code></pre></li>
<li><p>创建全文索引</p>
<pre><code> <span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index15(
    id <span class="built_in">int</span>,
    info <span class="built_in">text</span>
    )<span class="keyword">engine</span>=myisam;</span>

<span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> index15 <span class="keyword">add</span> fulltext <span class="keyword">index</span> index15_info(info);</span>
</code></pre></li>
<li><p>创建单列索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index16(
    id <span class="built_in">int</span>,
    address <span class="built_in">varchar</span>(<span class="number">20</span>)
    );</span>

<span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> index16 <span class="keyword">add</span> <span class="keyword">index</span> index16_addr(address(<span class="number">4</span>));</span>
</code></pre></li>
<li><p>创建多索引</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index17(
    id <span class="built_in">int</span>,
    name <span class="built_in">varchar</span>(<span class="number">20</span>),
    address <span class="built_in">varchar</span>(<span class="number">50</span>)
    );</span>

<span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> index17 <span class="keyword">add</span> <span class="keyword">index</span> index17(name,address);</span>
</code></pre></li>
<li><p>创建空间索引</p>
<pre><code> <span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> index18(
    id <span class="built_in">int</span>,
    line geometry <span class="keyword">not</span> <span class="literal">null</span>
    )<span class="keyword">engine</span>=myisam;</span>

<span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> index18 <span class="keyword">add</span> spatial <span class="keyword">index</span> index18_line(line);</span>
</code></pre></li>
</ol>
<h3 id="删除索引">删除索引</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">drop index 索引名 on 表名;</div></pre></td></tr></table></figure>
<p>例19：</p>
<pre><code><span class="operator"><span class="keyword">drop</span> <span class="keyword">index</span> id <span class="keyword">on</span> index1;</span>
</code></pre><h2 id="视图">视图</h2><blockquote>
<p>视图是从一个或多个表中导出来的表，是一种虚拟存在的表。视图就像一个窗口，通过这个窗口可以看到系统专门提供的数据。这样，用户可以不用看到整个数据库表中的数据，而只是关心对自己有用的数据。视图可以使用户的操作更方便，而且可以保障数据库系统的安全性。是在原有的表或视图的基础上重新定义的虚拟表，这可以从原有的表上选取对用户有用的信息。 </p>
<p>视图作用：</p>
<ol>
<li>使操作简单化 </li>
<li>增加数据的安全性 </li>
<li>提高表的逻辑独立性</li>
</ol>
</blockquote>
<h3 id="创建视图">创建视图</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create [algorithm=&#123;undefined|merge|temptable&#125;]</div><div class="line">   view 视图名 [(属性清单)]</div><div class="line">   as select 语句</div><div class="line"> [with[cascaded|local]check option];</div></pre></td></tr></table></figure>
<ol>
<li>undefined—&gt;自动选择算法 </li>
<li>merge ——-&gt;将使用视图的语句与视图定义合并起来，使得视图定义的某一部分取代语句的对应部分;</li>
<li>temptable—&gt;表示将视图的结果存入临时表，然后使用临时表执行语句</li>
<li>cascaded—-&gt;是可选参数,表示更新视图是要满足所有相关视图和表的条件，该参数为默认值</li>
<li>local———&gt;表示更新视图时要满足该视图本身的定义的条件即可</li>
</ol>
<p>例20：</p>
<ol>
<li><p>在单表上创建视图</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">view</span> department_view1
    <span class="keyword">as</span> seleclt * <span class="keyword">from</span> department;</span>

<span class="operator"><span class="keyword">create</span> <span class="keyword">view</span> department_view2(name,<span class="keyword">function</span>,location)
    <span class="keyword">as</span> <span class="keyword">select</span> d_name,<span class="keyword">function</span>,address <span class="keyword">from</span> department;</span>
</code></pre></li>
<li><p>在多表上创建视图</p>
<pre><code><span class="operator"><span class="keyword">create</span> algorithm=<span class="keyword">merge</span> <span class="keyword">view</span> worker_view1     (name,department,sex,age,address)
   <span class="keyword">as</span> <span class="keyword">select</span> name,department.d_name,sex,<span class="number">2009</span>-birthday,address
   <span class="keyword">from</span> worker,department <span class="keyword">where</span> worker.id_id = department.id_id
   <span class="keyword">with</span> <span class="keyword">local</span> <span class="keyword">check</span> <span class="keyword">option</span>;</span>
</code></pre></li>
</ol>
<h3 id="查看视图">查看视图</h3><blockquote>
<p>要有查看视图的权限<br>方法有：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">  	describe语句</div><div class="line"></div><div class="line">show table status语句</div><div class="line"></div><div class="line">show create view语句</div></pre></td></tr></table></figure></p>
</blockquote>
<p>例21：</p>
<p>查询information_schema数据库下的views表等</p>
<ol>
<li>describe 视图名;  或 desc 视图名;</li>
<li>show table status like ‘视图名’</li>
<li>show create view 视图名  查看详细信息</li>
<li>在view表中查看所有视图的详细信息<code>select * from information_schema.views</code> </li>
</ol>
<h3 id="修改视图">修改视图</h3><ol>
<li><p>使用create or replace view语句可以来修改视图,后面的和创建视图语句一样</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create or replace algorithm=temptable</div><div class="line">view department_view1(department,function,location)</div><div class="line">as select d_name,function,address from department;</div></pre></td></tr></table></figure>
</li>
<li><p>alter语句来修改视图</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter[algorithm=&#123;undefined|merge|temptable&#125;]</div><div class="line">view 视图名[(属性清单)]</div><div class="line">as select语句</div><div class="line">[with [cascaded|local]] check option];</div></pre></td></tr></table></figure>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">view</span> department_view2(department,name,sex,location)
        <span class="keyword">as</span> <span class="keyword">select</span> d_name,worker.name,worker.sex,address
        <span class="keyword">from</span> department,worker <span class="keyword">where</span> department.d_id=<span class="keyword">work</span>.d_id
     <span class="keyword">with</span> <span class="keyword">check</span> <span class="keyword">option</span>;</span>
</code></pre></li>
</ol>
<h3 id="更新视图">更新视图</h3><blockquote>
<p>更新视图是指通过视图来插入，更新和删除表中的数据。因为视图是一个虚拟表，其中并没有数据。通过视图更新时，都是转换到基本表来更新。更新视图时，只能更新权限范围内的数据。超出了范围，就不能更新。</p>
</blockquote>
<p>例22：</p>
<ol>
<li><p>先创建一个视图</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">view</span> department_view3(name,<span class="keyword">function</span>,address)
<span class="keyword">as</span> <span class="keyword">select</span> d_name,<span class="keyword">function</span>,address <span class="keyword">from</span> departent <span class="keyword">where</span> d_id=<span class="number">1001</span>;</span>
</code></pre></li>
<li><p>查询视图</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> department_view3;</span>
</code></pre></li>
<li><p>更新视图</p>
<pre><code><span class="operator"><span class="keyword">update</span> department_view3 <span class="keyword">set</span> name=<span class="string">'科研'</span>,<span class="keyword">function</span>=<span class="string">'新产品研发'</span>，address=<span class="string">'3号楼5层'</span>;</span>
</code></pre></li>
</ol>
<h3 id="不能更新的视图分类：">不能更新的视图分类：</h3><blockquote>
<p>并不是所有视图都可以更新 以下情况不能更新视图:</p>
</blockquote>
<ol>
<li><p>视图中包含<code>sum()</code>,<code>count()</code>,<code>max()</code>,<code>min()</code>等函数 是不可以更新的</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">view</span> worker_view4(name,sex,totla)
   <span class="keyword">as</span> <span class="keyword">select</span> name ,sex,<span class="keyword">count</span>(name)<span class="keyword">from</span> worker;</span>
</code></pre></li>
<li><p>视图中包含<code>union</code>,<code>union all</code>,<code>distinct</code>,<code>group by</code>,<code>having</code>等关键字</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">view</span> worke_view5(name,sex,address)
   <span class="keyword">as</span> <span class="keyword">select</span> name,sex,homeaddress <span class="keyword">from</span> worker <span class="keyword">group</span> <span class="keyword">by</span> d_id;</span>
</code></pre></li>
<li><p>常量视图</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">view</span> worker_view6
    <span class="keyword">as</span> <span class="keyword">select</span> <span class="string">'Aric'</span> <span class="keyword">as</span> name;</span>
</code></pre><p> 因为视图中name字段是一人字符串常量“Aric”所以该视图是不能更新的</p>
</li>
<li><p>视图中的select中包含子查询</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">view</span> worker_view7(name)
<span class="keyword">as</span> <span class="keyword">select</span> (<span class="keyword">select</span> name <span class="keyword">from</span> worker);</span>
</code></pre></li>
<li><p>由不可更新的视图导出的视图</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">view</span> worker_view8
   <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> worker_view7;</span>
</code></pre></li>
<li>创建视图时，algorithm 为temptable类型的视图也是不可更新的</li>
<li>视图对应的表上存在没有默认值的列，而且该列没有包含在视图里。如表里包含name字段没有默认值，但是视图中不包括该字段。那么这个视图是不能更新的。因为更新视图时，这个没有默认值的记录将没有值插入，也没有null值插入。数据库系统是不会允许这种情况出现的</li>
</ol>
<p><strong>注意：视图中虽然可以更新视图，但是有很多限制,一般用来查询，最好不要更新</strong></p>
<h3 id="删除视图">删除视图</h3><blockquote>
<p>删除视图，只是删除了视图的定义，不能删除数据<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">drop view [if exists] 视图名列表 [restrict|cascade]</div></pre></td></tr></table></figure></p>
</blockquote>
<p>查看是否有权限删除视图:<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select drop_priv from mysql.user where user=&apos;root&apos;;</div><div class="line">drop view if exists worker_view1;</div></pre></td></tr></table></figure></p>
<p>综合实例：</p>
<ol>
<li><p>创建work_infor表</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> work_info(
  id <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">unique</span> <span class="keyword">primary</span> <span class="keyword">key</span>,
  name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,
  sex <span class="built_in">varchar</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="literal">null</span>,
  age <span class="built_in">int</span>(<span class="number">5</span>),
  address <span class="built_in">varchar</span>(<span class="number">50</span>),
  tel <span class="built_in">varchar</span>(<span class="number">20</span>)
  );</span>
</code></pre></li>
<li><p>插入值</p>
<pre><code><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> work_info <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'张三'</span>,<span class="string">'M'</span>,<span class="number">18</span>,<span class="string">'海淀'</span>,<span class="string">'1234567'</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> work_info <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'李四'</span>,<span class="string">'M'</span>,<span class="number">22</span>,<span class="string">'昌平'</span>,<span class="string">'2345678'</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> work_info <span class="keyword">values</span>  (<span class="number">3</span>,<span class="string">'王五'</span>,<span class="string">'F'</span>,<span class="number">17</span>,<span class="string">'永州'</span>,<span class="string">'3456789'</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> work_info <span class="keyword">values</span> (<span class="number">4</span>,<span class="string">'赵六'</span>,<span class="string">'F'</span>,<span class="number">25</span>,<span class="string">'阜新'</span>,<span class="string">'4567890'</span>);</span>
</code></pre></li>
<li><p>创建视图in_view. 从表中选出 age&gt;20的记录来创建视图</p>
<pre><code><span class="operator"><span class="keyword">create</span> algorithm=<span class="keyword">merge</span> <span class="keyword">view</span>
  info_view(id,name,sex,address)
  <span class="keyword">as</span> <span class="keyword">select</span> id,name,sex,address <span class="keyword">from</span> work_info <span class="keyword">where</span> age&gt;<span class="number">20</span>
  <span class="keyword">with</span> <span class="keyword">local</span> <span class="keyword">check</span> <span class="keyword">option</span>;</span>
</code></pre></li>
<li><p>查询视图</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info_view;</span>
</code></pre></li>
<li><p>修改视图 </p>
<pre><code><span class="operator"><span class="keyword">alter</span> algorithm=<span class="keyword">merge</span> <span class="keyword">view</span>
     info_view(id,name,sex,address)
     <span class="keyword">as</span> <span class="keyword">select</span> id,name,sex,address <span class="keyword">from</span> work_info <span class="keyword">where</span> age&lt;<span class="number">20</span>
     <span class="keyword">with</span> <span class="keyword">local</span> <span class="keyword">check</span> <span class="keyword">option</span>;</span>
</code></pre></li>
<li><p>更新视图 </p>
<pre><code><span class="operator"><span class="keyword">update</span> info_view <span class="keyword">set</span> sex=<span class="string">'M'</span> <span class="keyword">where</span> id=<span class="number">3</span>;</span>
</code></pre></li>
<li><p>删除视图 </p>
<pre><code><span class="operator"><span class="keyword">drop</span> <span class="keyword">view</span> <span class="keyword">if</span> <span class="keyword">exists</span> info_view;</span>
</code></pre></li>
</ol>
<h2 id="触发器">触发器</h2><blockquote>
<p>解发器（trigger）是由事件来触发某个操作。这些事件包括<code>insert</code>,<code>update</code>,<code>delete</code>。当数据库系统执行这些事件时，就会激活触发器执行相应的操作。</p>
</blockquote>
<h3 id="创建触发器">创建触发器</h3><ol>
<li><p>创建只有一个执行语句的触发器</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create trigger 触发器名 before|after 触发事件</div><div class="line">    on 表名 for each row 执行语句</div></pre></td></tr></table></figure>
<blockquote>
<p>for each row 表示每个记录都会触发</p>
</blockquote>
<p> 例23：</p>
<p> 创建表</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(id <span class="built_in">int</span>,name <span class="built_in">char</span>(<span class="number">20</span>))

<span class="keyword">create</span> <span class="keyword">table</span> trigger_time(
exec_time <span class="keyword">time</span>);</span>
</code></pre><p> 创建一个触发器：</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">trigger</span> job_trig1 <span class="keyword">before</span> <span class="keyword">insert</span>
<span class="keyword">on</span>  <span class="keyword">user</span> <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span> 
 <span class="keyword">insert</span> <span class="keyword">into</span> trigger_time <span class="keyword">values</span>(<span class="keyword">now</span>());</span>
</code></pre><p> 插入值：    </p>
<pre><code><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'abc'</span>);</span>
</code></pre></li>
<li><p>创建有多个执行语句的触发器</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create trigger 触发器名 before|after</div><div class="line">触发事件</div><div class="line">on 表名 for each row</div><div class="line">begin  </div><div class="line">执行语句列表</div><div class="line">end;</div></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>执行语句列表，不同的的执行语句之间用分号隔开<br>可以改变结束标志用delimiter &amp;&amp;</p>
</blockquote>
<p>例24：</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">trigger</span> user_trig2 <span class="keyword">after</span> <span class="keyword">delete</span>
<span class="keyword">on</span> <span class="keyword">user</span> <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>
<span class="keyword">begin</span>
<span class="keyword">insert</span> <span class="keyword">into</span> tirgger_time <span class="keyword">value</span>(<span class="string">'21:01:01'</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> tirgger_time <span class="keyword">value</span>(<span class="string">'22:02:01'</span>);</span>
<span class="operator"><span class="keyword">end</span>
&amp;&amp;
delimeter ;</span>
</code></pre><h3 id="查看触发器">查看触发器</h3><ol>
<li><p>使用sql语句查看</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">show triggers</div></pre></td></tr></table></figure>
</li>
<li><p>mySqL中查看trigger</p>
<blockquote>
<p>mysql中，所有触发器的定义都存在information_schema数据库下的的triggers表中。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select * from information_schema.triggers;</div><div class="line">   select * from information_schema.triggers where trigger_name=&apos;user_trig2&apos;;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h3 id="触发器的使用">触发器的使用</h3><blockquote>
<p>mysql中，触发器的执行顺序是before触发器、表操作（insert、update和delete）、after触发器</p>
</blockquote>
<p>例24：</p>
<p>创建表：</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> triger_test(
id <span class="built_in">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,
info <span class="built_in">varchar</span>(<span class="number">20</span>)
);</span>
</code></pre><p>创建两个触发器：</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">trigger</span> before_insert <span class="keyword">before</span> <span class="keyword">insert</span>
<span class="keyword">on</span> <span class="keyword">user</span> <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>
<span class="keyword">insert</span> <span class="keyword">into</span> triger_test <span class="keyword">value</span>(<span class="literal">null</span>,<span class="string">'before'</span>);</span>

<span class="operator"><span class="keyword">create</span> <span class="keyword">trigger</span> after_insert  <span class="keyword">after</span> <span class="keyword">insert</span>
<span class="keyword">on</span> <span class="keyword">user</span> <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>
<span class="keyword">insert</span> <span class="keyword">into</span> triger_test <span class="keyword">value</span>(<span class="literal">null</span>,<span class="string">'after'</span>);</span>
</code></pre><p>执行sql语句：</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> triger_test;</span>
</code></pre><h3 id="删除触发器">删除触发器</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">drop trigger 名字</div></pre></td></tr></table></figure>
<p>触发器综合实例：</p>
<ol>
<li><p>创建表</p>
<p>   create table product(<br>   id int(10) not null unique primary key,<br>   name varchar(20) not null,<br>   function varchar(20) not null,<br>   address varchar(50)<br>   );</p>
<p>   create table operate(<br>   op_id int(10) not null unique primary key auto_increment,<br>   op_name varchar(20) not null,<br>   op_time time not null<br>   );</p>
</li>
<li><p>创建触发器 </p>
</li>
</ol>
<blockquote>
<p>创建插入触发器</p>
</blockquote>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">trigger</span> product_bf_insert <span class="keyword">before</span> <span class="keyword">insert</span>
        <span class="keyword">on</span> product <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>
        <span class="keyword">insert</span> <span class="keyword">into</span> operate <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'Insert product'</span>,<span class="keyword">now</span>());</span>
</code></pre><blockquote>
<p>创建更新触发器</p>
</blockquote>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">trigger</span> product_af_update <span class="keyword">after</span> <span class="keyword">update</span>
      <span class="keyword">on</span> product <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>
      <span class="keyword">insert</span> <span class="keyword">into</span> operate <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'update product'</span>,<span class="keyword">now</span>());</span>
</code></pre><blockquote>
<p>创建删除触发器</p>
</blockquote>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">trigger</span> product_af_del <span class="keyword">after</span> <span class="keyword">delete</span>
      <span class="keyword">on</span> product <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>
      <span class="keyword">insert</span> <span class="keyword">into</span> operate <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'delete product'</span>,<span class="keyword">now</span>());</span>
</code></pre><blockquote>
<p>执行sql操作，查询触发器内容</p>
</blockquote>
<pre><code><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'b'</span>,<span class="string">'afa'</span>,<span class="string">'afs'</span>);</span>

<span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> operate;</span>

<span class="operator"><span class="keyword">update</span> product <span class="keyword">set</span> address=<span class="string">"aaaa"</span>;</span>

<span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> operate;</span>

<span class="operator"><span class="keyword">delete</span> <span class="keyword">from</span> product;</span>

<span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> operate;</span>
</code></pre><blockquote>
<p>删除触发器</p>
</blockquote>
<pre><code><span class="operator"><span class="keyword">drop</span> <span class="keyword">trigger</span> product_bf_insert;</span>
<span class="operator"><span class="keyword">drop</span> <span class="keyword">trigger</span> product_af_update;</span>
<span class="operator"><span class="keyword">drop</span> <span class="keyword">trigger</span> product_af_del;</span>
</code></pre><h1 id="数据操作语言DML">数据操作语言DML</h1><h2 id="数据查询">数据查询</h2><h3 id="查询语句的基本语法">查询语句的基本语法</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select 属性列表</div><div class="line">from 表名或视图列表</div><div class="line">[where 条件表达式1]</div><div class="line">[group by 属性名1 [having 条件表达式2]]</div><div class="line">[order by 属性名2 [asc|desc]]</div></pre></td></tr></table></figure>
<blockquote>
<p>如果有where子句，就按“条件表达式1”指定的条件进行查询，如果没有where子句就查询所有记录,如果有<code>group by</code>子句，就按照 <code>属性名1</code> 指定的字段进行分组，如果<code>group by</code>子句后有<code>having</code>关键字，那么只有满足<code>条件表达式2</code>中指定的条件的才能够输出,<code>group by</code>子句通常和<code>count()</code>,<code>sum()</code>等聚合函数一起使用。</p>
</blockquote>
<p>查询条件:</p>
<ol>
<li>—比较  =，&lt;,&lt;=,&gt;,&gt;=,!=,&lt;&gt;,!&gt;,!&lt;,</li>
<li>—指定范围 between and,not between and</li>
<li>—指定集合 in,not in</li>
<li>—匹配字符 like,not like</li>
<li>—是否为空值 is null,is not null</li>
<li>—多个查询条件 and ,or</li>
</ol>
<h3 id="在单表上查询数据">在单表上查询数据</h3><ol>
<li>—查询所有字段  列出表的所有字段 使用*</li>
<li><p>—查询指定字段 </p>
<pre><code><span class="operator"><span class="keyword">select</span> name,sex,homeaddress <span class="keyword">from</span> emploee <span class="keyword">where</span> d_id=<span class="number">1001</span>;</span>
</code></pre></li>
<li><p>—in关键字查询<br> in关键字可以判断某个字段的值是否在指定的集合中，如果字段的值在集合中，则满足查询条件，该记录将被查询出来。如果不在集合中，则不满足查询条件。</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[not] in(元素1，元素2.....,元素n)</div></pre></td></tr></table></figure>
<p> 例25：</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> emploee <span class="keyword">where</span> d_id <span class="keyword">in</span>(<span class="number">1001</span>,<span class="number">1004</span>);</span>
</code></pre></li>
<li><p>—between and范围查询</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[not] between 值1 and 值2</div></pre></td></tr></table></figure>
<p> 例26：</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> emploee <span class="keyword">where</span> id beteewn <span class="number">15</span> <span class="keyword">and</span> <span class="number">25</span>;</span>
<span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> emploee <span class="keyword">where</span> id <span class="keyword">not</span> beteewn <span class="number">15</span> <span class="keyword">and</span> <span class="number">25</span>;</span>
</code></pre></li>
<li><p>—带like的字符串匹配查询</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[not] like &apos;字符串&apos;</div></pre></td></tr></table></figure>
<blockquote>
<p>通配符%，代表任意的,   _ 表示一个字符</p>
</blockquote>
<p> 例27：</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> emploee <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">'张%'</span>;</span>
</code></pre></li>
<li><p>—查询空值</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">is [not] null</div></pre></td></tr></table></figure>
<p> 例28： 查询work表中 info字段为空值的记录</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">work</span> <span class="keyword">where</span> info <span class="keyword">is</span> <span class="literal">null</span>;</span>
</code></pre></li>
<li><p>—and多条件查询</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select * from emploee where d_id&lt;100 and age&lt;26 and sex=&apos;男&apos;</div><div class="line">select * from emploee where num in(1,2,3) and age between 15 and 25 and homeaddr like &quot;%北京%&quot;;</div></pre></td></tr></table></figure>
</li>
<li><p>—or 关键字多条件查询</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select * from emploee where</div><div class="line">num in(1,2,3) and age=25</div><div class="line">or sex=&apos;女&apos;;</div></pre></td></tr></table></figure>
</li>
<li><p>—查询结果不重复</p>
<blockquote>
<p>使用distinct使用d_id字段不重复</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select distinct d_id from employee;</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>—查询结果排序</p>
<blockquote>
<p>order by 属性名[asc|desc]</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">//先用d_di升序排列，如果出现相同的再按age 降序排列  </div><div class="line">select * from employee order by d_id asc,age desc;</div></pre></td></tr></table></figure>
</li>
<li><p>—分组查询</p>
<blockquote>
<p>group by 关键字可以将查询结果按某个字段或多个字段分组。字段中值相等的为一组。语法规则如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">group by 属性名[having 条件表达式][with rollup]</div></pre></td></tr></table></figure>
</blockquote>
<ol>
<li><p>单独使用group by关键字来分组</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select * from employee group by sex;  //只显示每一组的第一条记录</div></pre></td></tr></table></figure>
</li>
<li><p>group by关键字与group_concat()函数一起使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select sex,group_concat(name) from employee group by sex;</div></pre></td></tr></table></figure>
<blockquote>
<p>把name字段的所有值都显示出来</p>
</blockquote>
</li>
<li><p>group by关键字与集合函数一起使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select sex,count(sex) from employee group by sex;//记录各多少人</div></pre></td></tr></table></figure>
</li>
<li><p>group by关键字与having一起使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select sex,count(sex) from employee</div><div class="line"> group by sex having count(sex)&gt;=3</div></pre></td></tr></table></figure>
<blockquote>
<p>只有count(sex)&gt;=3的分组才能显示出来</p>
</blockquote>
</li>
<li><p>按多个字段进行分组</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select * from employee group by d_id,sex;</div></pre></td></tr></table></figure>
<blockquote>
<p>同时使用两个字段来分组,首先用d_id进行分组，如果相同则再按sex进行分组</p>
</blockquote>
</li>
<li><p>group by关键与with rollup 一起使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select sex,count(sex) from employ ee</div><div class="line">    group by sex with rollup;</div></pre></td></tr></table></figure>
<blockquote>
<p>会对记录进行求和</p>
</blockquote>
<pre><code><span class="operator"><span class="keyword">select</span> sex,<span class="keyword">group_concat</span>(name) <span class="keyword">from</span> employee
<span class="keyword">group</span> <span class="keyword">by</span> sex <span class="keyword">with</span> <span class="keyword">rollup</span>;</span>
</code></pre></li>
<li><p>—用limit限制查询结果的数量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select * from employee limit 2;限查2条 从第一条开始显示</div><div class="line">select * from employee limit 1,2;从第2条开始，只显示2条 查询时0表示第一条</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h3 id="使用聚合函数查询数据">使用聚合函数查询数据</h3><blockquote>
<p>聚合函数包括<code>count()</code>,<code>sum()</code>,<code>avg()</code>,<code>max()</code>,<code>min()</code>.</p>
</blockquote>
<ol>
<li><p>count(): </p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select count(*)  from employee;</div></pre></td></tr></table></figure>
<p> 先分组，再查出每个分组中的记录数</p>
<pre><code><span class="operator"><span class="keyword">select</span> id_id,<span class="keyword">count</span>(*) <span class="keyword">from</span> emplyee <span class="keyword">group</span> <span class="keyword">by</span> d_di;</span>
</code></pre></li>
<li><p>sum():</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select num,sum(score) from grade where num=1001;</div></pre></td></tr></table></figure>
<p> sum()经常与group by一起使用</p>
<pre><code><span class="operator"><span class="keyword">select</span> num,<span class="keyword">sum</span>(score) <span class="keyword">from</span> grade <span class="keyword">group</span> <span class="keyword">by</span> num;</span>
</code></pre></li>
<li><p>avg():  </p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select avg(age) from employee;</div><div class="line">select  course,avg(scroe) from grade group by course;</div></pre></td></tr></table></figure>
</li>
<li><p>max(): </p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select max(age) from employee;</div></pre></td></tr></table></figure>
<p> 分组之后查询每组最大值</p>
<pre><code><span class="operator"><span class="keyword">select</span> num,course,<span class="keyword">max</span>(scroe) <span class="keyword">from</span> grade  <span class="keyword">group</span> <span class="keyword">by</span> coure;</span>
</code></pre></li>
<li><p>min()：</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select min(age) from employee;</div><div class="line">      select num,course,min(scroe) from grade group by coure;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="多表上联合查询">多表上联合查询</h3><hr>
<h4 id="内连接查询">内连接查询</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select num,name,employee.d_di,age,sex,d_name,function</div><div class="line">  from employee,department</div><div class="line">  where employee.d_id = department.d_id;</div></pre></td></tr></table></figure>
<h4 id="外连接查询">外连接查询</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select 属性名列表</div><div class="line">	from 表名1 left|right join  表名2</div><div class="line"> 	on 表名1.属性名1=表名2.属性名2；</div></pre></td></tr></table></figure>
<ol>
<li><p>左连接查询  查询前面表的所有记录，没的用空值补充,保留前面表记录加中符合条件右面表记录</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select num,name,employee,d_id,age,sex,d_name,function</div><div class="line">	from employee left join department</div><div class="line">	on employee.d_id=department.d_id;</div></pre></td></tr></table></figure>
</li>
<li><p>右连接查询</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select num,name,employee,d_id,age,sex,d_name,function</div><div class="line">	from employee right join department</div><div class="line">	on employee.d_id = department.d_id;</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="复合条件查询">复合条件查询</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select num,name,employee.d_di,age,sex,d_name,function</div><div class="line">from employee,department</div><div class="line">where employee.id_id= department.d_id</div><div class="line">and age&gt;24;</div></pre></td></tr></table></figure>
<h3 id="子查询">子查询</h3><blockquote>
<p>内层查询语句的查询结果可以为外层查询提供查询条件</p>
</blockquote>
<ol>
<li><p>—in的子查询</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select　* from employee</div><div class="line">   where d_id in</div><div class="line">    (select d_id from department)</div></pre></td></tr></table></figure>
</li>
<li><p>—比较运算符的查询</p>
<p> 例29： 查询出谁获得了一等奖学金</p>
<pre><code><span class="operator"><span class="keyword">select</span> id,name,score <span class="keyword">from</span> computer_stu
   <span class="keyword">where</span> score&gt;=
   (<span class="keyword">select</span> score <span class="keyword">from</span> scholarship
     <span class="keyword">where</span> <span class="keyword">level</span>=<span class="number">1</span>);</span>
</code></pre><p> 例30： 查询那些部门没有年龄是24的员工</p>
<pre><code><span class="operator"><span class="keyword">select</span> d_id,d_name <span class="keyword">from</span> employee
    <span class="keyword">where</span> d_id !=
    (<span class="keyword">select</span> d_di <span class="keyword">from</span> employee
     <span class="keyword">where</span> age=<span class="number">24</span>);</span>
</code></pre></li>
<li><p>exists关键字的字查询，返回直假值，如果返回真，就执行外层查询，如果为假就不查询没结果</p>
<p> 例31 查询开发部id为1003的员工名字存在不存在，如果存在则查出所有雇员信息</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> employee
  <span class="keyword">where</span> <span class="keyword">exists</span>
  (<span class="keyword">select</span> d_name <span class="keyword">from</span> department <span class="keyword">where</span> d_id=<span class="number">1003</span>);</span>

<span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> employee
   <span class="keyword">where</span> age&gt;<span class="number">24</span> <span class="keyword">and</span> <span class="keyword">exists</span>
   (<span class="keyword">select</span> d_name <span class="keyword">from</span> department <span class="keyword">where</span> d_id=<span class="number">1003</span>);</span>
</code></pre></li>
<li><p>any 关键字的子查询,满足内层查询语句返回的结果中的任何一个，就可通过该条件来执行外层查询语句</p>
<p>  例32： 查询谁获得奖学金，只要满足一条就可以</p>
<pre><code> <span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> computer_stu
    <span class="keyword">where</span> score&gt;=<span class="keyword">any</span>
(<span class="keyword">select</span> score <span class="keyword">from</span> scholarship);</span>
</code></pre></li>
<li><p>all 关键字子查询</p>
<p>  例33： 查询一等奖学金的获得者</p>
<pre><code><span class="keyword">select</span> *　<span class="keyword">from</span> computer_stu
 <span class="built_in">where</span> score&gt;=<span class="built_in">all</span>
 (<span class="keyword">select</span> score <span class="keyword">from</span> scholarship)
</code></pre></li>
<li><p>合并查询结果，是将多个select语句的查询结果合并到一起。</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">select 语句1</div><div class="line">union|union all</div><div class="line">select 语句2</div><div class="line">union|union all</div><div class="line">select 语句n</div></pre></td></tr></table></figure>
<p> union表示会去掉重复的，union all则不会去掉重复的</p>
</li>
<li><p>为表和字段取别名</p>
<blockquote>
<p>为表取别名</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">表名 别名</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>例34：</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> department d
       <span class="keyword">where</span> d.d_id=<span class="number">1001</span>;</span>
</code></pre><blockquote>
<p>为字段取别名<br>    <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">属性名 [as] 别名</div></pre></td></tr></table></figure></p>
</blockquote>
<p>例35：</p>
<pre><code><span class="operator"><span class="keyword">select</span> d_id <span class="keyword">as</span> department_id d_name <span class="keyword">as</span> department_name <span class="keyword">from</span> department;</span>
</code></pre><h3 id="使用正则表达式查询">使用正则表达式查询</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">属性名 regexp &apos;匹配方式&apos;</div></pre></td></tr></table></figure>
<blockquote>
<p>正则表达式：</p>
<pre><code>^          匹配字符串开始的部分
$          匹配字符串结束的部分
.          代表字符串中的任意一个字符，包括回车和换行
[字符集合]  匹配‘字符集合’中的任何一个字符
[^字符集合] 匹配除了‘字符集合’中的任何一个字符
s1|s2|s3   匹配s1,s2,s3中的任意一个字符串
<span class="comment">*          代表多个该符号之前的字符 ，饭0个和1个</span>
+          代表多个该符号之前的字符   1个以上
字符串{<span class="keyword">n</span>}   字符串出现<span class="keyword">N</span>次
字符串｛<span class="keyword">M</span>,<span class="keyword">N</span>｝ 字符串出现至少<span class="keyword">n</span>次，最多<span class="keyword">m</span>次
</code></pre></blockquote>
<p>例36： 从info 表name字段中查询以L开头的记录</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'^L'</span>;</span>
</code></pre><p>例37： 以字符串aaa开头的</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'^aaa'</span></span>
</code></pre><p>例38：以字符c结尾的</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'c$'</span></span>
</code></pre><p>例39：以字符串aaa结尾的</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'aaa$'</span></span>
</code></pre><p>例40：以a开头以c结尾，中间为任意两个字符的记录</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'^a..c$'</span></span>
</code></pre><p>例41：只要查询结果包括了a,b,c 任意一个就可以查询出来</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'[abc]'</span>;</span>
</code></pre><p>例42： 包括0-9中任何一个</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'[0-9]'</span></span>
</code></pre><p>例43： 包含0-9任一字线，abc任一个</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'[0-9abc]'</span></span>
</code></pre><p>例44： 匹配包含 不在 a到w ，0-9外的任意一个字符的集合</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> ‘[^a-w0-<span class="number">9</span>]’</span>
</code></pre><p>例45： 匹配包含指定字符串</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'ic'</span></span>
</code></pre><p>例46： 匹配任何一个</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'id|ab|uc'</span></span>
</code></pre><p>例47： a在c前面至少出现一次</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'a+c'</span></span>
</code></pre><p>例48： a连续出现3次</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'a{3}'</span></span>
</code></pre><p>例49：ab最少一次，最多3次</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> info <span class="keyword">where</span> name <span class="keyword">regexp</span> <span class="string">'ab{1,3}'</span></span>
</code></pre><h3 id="查询综合实例">查询综合实例</h3><ol>
<li><p>准备数据</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span>  student(
id <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">unique</span> <span class="keyword">primary</span> <span class="keyword">key</span>,
name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,
sex <span class="built_in">varchar</span>(<span class="number">4</span>),
birth <span class="keyword">year</span>,
department <span class="built_in">varchar</span>(<span class="number">20</span>),
address <span class="built_in">varchar</span>(<span class="number">50</span>)
);</span>

<span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> score(
id <span class="built_in">int</span>(<span class="number">10</span>)<span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">unique</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,
stu_id <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span>,
c_name <span class="built_in">varchar</span>(<span class="number">20</span>),
grade <span class="built_in">int</span>(<span class="number">10</span>)
);</span>

<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">901</span>,<span class="string">'张老大'</span>,<span class="string">'男'</span>,<span class="number">1985</span>,<span class="string">'计算机系'</span>,<span class="string">'海淀区'</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">902</span>,<span class="string">"张老二"</span>,<span class="string">"男"</span>,<span class="number">1986</span>,<span class="string">"中文系"</span>,<span class="string">"昌平区"</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">903</span>,<span class="string">"张三"</span>,<span class="string">"女"</span>,<span class="number">1990</span>,<span class="string">"中文系"</span>,<span class="string">"永州"</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">904</span>,<span class="string">"李四"</span>,<span class="string">"男"</span>,<span class="number">1990</span>,<span class="string">"英语机系"</span>,<span class="string">"阜新"</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">905</span>,<span class="string">"王五"</span>,<span class="string">"女"</span>,<span class="number">1991</span>,<span class="string">"英语机系"</span>,<span class="string">"厦门"</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">906</span>,<span class="string">"王六"</span>,<span class="string">"男"</span>,<span class="number">1988</span>,<span class="string">"计算机系"</span>,<span class="string">"衡阳"</span>);</span>

<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">901</span>,<span class="string">'计算机'</span>,<span class="number">98</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">901</span>,<span class="string">'英语'</span>,<span class="number">80</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">902</span>,<span class="string">'计算机'</span>,<span class="number">65</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">902</span>,<span class="string">'中文'</span>,<span class="number">88</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">903</span>,<span class="string">'中文'</span>,<span class="number">95</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">904</span>,<span class="string">'计算机'</span>,<span class="number">70</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">904</span>,<span class="string">'英语'</span>,<span class="number">92</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">905</span>,<span class="string">'英语'</span>,<span class="number">92</span>);</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="literal">null</span>,<span class="number">906</span>,<span class="string">'计算机'</span>,<span class="number">90</span>);</span>
</code></pre></li>
<li><p>查询学生表中从index 1开始的3条数据（第一条记录index为0）</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">limit</span> <span class="number">1</span>,<span class="number">3</span>;</span>
</code></pre></li>
<li><p>查询计算机系和英语系的学生信息</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> student
  <span class="keyword">where</span> department <span class="keyword">in</span>(<span class="string">'计算机机系'</span>,<span class="string">'英语系'</span>);</span>

<span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> student
  <span class="keyword">where</span> department =<span class="string">'计算机机系'</span> <span class="keyword">or</span> <span class="string">'英语系'</span>;</span>
</code></pre></li>
<li><p>查询年龄在18-20间的学生</p>
<pre><code>select <span class="property">id</span>,<span class="property">name</span>,sex,<span class="number">2009</span>-birth <span class="keyword">as</span> age,department,address
<span class="keyword">from</span> student
<span class="keyword">where</span> <span class="number">2009</span>-birth <span class="keyword">between</span> <span class="number">18</span> <span class="keyword">and</span> <span class="number">20</span>;
</code></pre></li>
<li><p>查询各系有多少人</p>
<pre><code><span class="operator"><span class="keyword">select</span> department,<span class="keyword">count</span>(id)
   <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> department;</span>
</code></pre></li>
<li><p>查询每个科目的最高分 先分组再查最高分</p>
<pre><code><span class="operator"><span class="keyword">select</span> c_name,<span class="keyword">max</span>(grade)
   <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> c_name;</span>
</code></pre></li>
<li><p>查询李四的成绩</p>
<pre><code><span class="operator"><span class="keyword">select</span> c_name,grade
    <span class="keyword">from</span> score <span class="keyword">where</span> stu_id =
     (<span class="keyword">select</span> id <span class="keyword">from</span> student
    <span class="keyword">where</span> name=<span class="string">"李四"</span>);</span>
</code></pre></li>
<li><p>查询所有学生的信息</p>
<pre><code>select student.<span class="property">id</span>,<span class="property">name</span>,sex,birth,department,address,c_name,grade
    <span class="keyword">from</span> student,score
    <span class="keyword">where</span> student.<span class="property">id</span>=score.stu_id;
</code></pre></li>
<li><p>计算每一个学生的总成绩</p>
<pre><code><span class="operator"><span class="keyword">select</span> stu_id,<span class="keyword">sum</span>(grade)
 <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> stu_id;</span>

<span class="operator"><span class="keyword">select</span> student.id,name,<span class="keyword">sum</span>(grade)
  <span class="keyword">from</span> student,score
  <span class="keyword">where</span> student.id = score.stu_id
 <span class="keyword">group</span> <span class="keyword">by</span> student.id;</span>
</code></pre></li>
<li><p>求每一科的平均成绩</p>
<pre><code><span class="operator"><span class="keyword">select</span> c_name,<span class="keyword">avg</span>(grade)
    <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> c_name;</span>
</code></pre></li>
<li><p>查询计算机成绩低于95的学生信息</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> student
    <span class="keyword">where</span> id <span class="keyword">in</span>
    (<span class="keyword">select</span> stu_id <span class="keyword">from</span> score
        <span class="keyword">where</span> c_name=<span class="string">'计算机系'</span><span class="keyword">and</span> grade&lt;<span class="number">95</span>);</span>
</code></pre></li>
<li><p>查询同时参加计算机和英语考试的学生的信息。先从score表中查出谁同时参加了两科取出学号，再在student里查询</p>
<pre><code><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> student
<span class="keyword">where</span> id= <span class="keyword">any</span>
    (<span class="keyword">select</span> stu_id <span class="keyword">from</span> score
        <span class="keyword">where</span> stu_id <span class="keyword">in</span>(
            <span class="keyword">select</span> stu_id <span class="keyword">from</span>
            score <span class="keyword">where</span> c_name=<span class="string">'计算机'</span>)
            <span class="keyword">and</span> c_name=<span class="string">'英语'</span>);</span>
</code></pre></li>
<li><p>将计算机成绩从高到低排序</p>
<pre><code><span class="operator"><span class="keyword">select</span> stu_id,grade
    <span class="keyword">from</span> score
        <span class="keyword">where</span> c_name=<span class="string">'计算机'</span>
            <span class="keyword">order</span> <span class="keyword">by</span> grade <span class="keyword">desc</span>;</span>
</code></pre></li>
<li><p>查询两个表中的所有学号</p>
<pre><code><span class="operator"><span class="keyword">select</span> id <span class="keyword">from</span> student
<span class="keyword">union</span>
<span class="keyword">select</span> stu_id <span class="keyword">from</span> score;</span>
</code></pre></li>
<li><p>查询姓张或姓王的同学的姓名，院系，考试科目和成绩</p>
<pre><code><span class="operator"><span class="keyword">select</span> student.id,name,sex,birth,department,address,c_name,grade
<span class="keyword">from</span> student,score
<span class="keyword">where</span>
    (name <span class="keyword">like</span> <span class="string">'张%'</span> <span class="keyword">or</span> name <span class="keyword">like</span> <span class="string">'王%'</span>)
<span class="keyword">and</span>
    student.id=score.stu_id;</span>
</code></pre></li>
</ol>
<h2 id="插入数据">插入数据</h2><blockquote>
<p>可以为表的所有字段插入，也可以插入指定字段</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">insert into 表名 values(值列表)</div><div class="line">insert into 表名 字段列表 values(值列表）</div></pre></td></tr></table></figure>
<blockquote>
<p>同时插入多条记录</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">insert into 表名 （字段列表）values(值列表)，（值列表）</div></pre></td></tr></table></figure>
<blockquote>
<p>将查询结果插入到表中</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">insert into 表名1（属性列表1） select 属性列表2 from 表名2 where 条表达式;</div></pre></td></tr></table></figure>
<h2 id="更新数据">更新数据</h2><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">update 表名</div><div class="line">	set 属性名1=取值1，属性名2=聚会2</div><div class="line">	...</div><div class="line">	属性名n=取值n</div><div class="line">	where 条件表达式;</div></pre></td></tr></table></figure>
<p>满足条件表达式的记录才会更新</p>
<h2 id="存储过程和函数">存储过程和函数</h2><blockquote>
<p>存储过程和函数是在数据库中定义一些sql语句的集合，然后直接调用这些存储过程和函数来执行<br>已经定义好的sql语句。存储过程和函数可以避免开发人员重复的编写相同的sql语句。而且存储过程和函数是在mysql服务器中存储和执行的，可以减少客户端和服务器端的数据传输。</p>
</blockquote>
<h3 id="创建存储过程">创建存储过程</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create procedure sp_name</div><div class="line">  ([proc_parameter[,..]])</div><div class="line">     [characteristic...]routine_body</div><div class="line">      [in|out|inout]param_name type</div></pre></td></tr></table></figure>
<p>下面创建一个名为num_from_emplyee存储过程:</p>
<pre><code>delimiter&amp;&amp;
 <span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">num_from_employee</span><span class="params">(<span class="keyword">in</span> emp_id int,<span class="keyword">out</span> count_num int)</span>//参数输入与输出类型
        <span class="title">reads</span> <span class="title">sql</span> <span class="title">data</span>
        <span class="title">BEGIN</span>
           <span class="title">select</span> <span class="title">count</span><span class="params">(*)</span> <span class="title">into</span> <span class="title">count_num</span>
           <span class="title">from</span> <span class="title">employee</span>
           <span class="title">where</span> <span class="title">d_id</span>=<span class="title">emp_id</span>;</span>
        <span class="keyword">END</span>
        &amp;&amp;
  delimiter;
</code></pre><h3 id="创建存储函数">创建存储函数</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create function sp_name([func_parameter[,...]])</div><div class="line">    retruns type</div><div class="line">    [characteristic..]routine_body</div></pre></td></tr></table></figure>
<p>创建一个名为name_from_employee的存储函数</p>
<pre><code>delimiter &amp;&amp;
<span class="operator"><span class="keyword">create</span> <span class="keyword">function</span> name_from_employee(emp_id <span class="built_in">int</span>)
       <span class="keyword">returns</span> <span class="built_in">varchar</span>(<span class="number">20</span>)
       <span class="keyword">BEGIN</span>
          <span class="keyword">return</span> (<span class="keyword">select</span> name
            <span class="keyword">from</span> employee
            <span class="keyword">where</span> num=emp_id);</span>
       <span class="operator"><span class="keyword">END</span>
       &amp;&amp;
 delimiter;</span>
</code></pre><h3 id="变量的使用">变量的使用</h3><blockquote>
<p>存储过程和函数可以定义变量和使用变量。用户可以使用<code>declare</code>关键字来定义<br>变量。然后可以为变量赋值。这些变量的作用范围是<code>begin...end</code>程序段中。</p>
</blockquote>
<p>下面定义变量my_sql，数据类型为int型，默认值为10<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">declare my_sql int defaut 10;</div></pre></td></tr></table></figure></p>
<p>为变量赋值<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">set my_sql=30;</div></pre></td></tr></table></figure></p>
<p>下面从employee表中查询id为2的记录，将该记录的d_id值赋给变量my_sql</p>
<pre><code><span class="operator"><span class="keyword">select</span> d_id <span class="keyword">into</span> my_sql
    <span class="keyword">from</span> employee <span class="keyword">where</span> id=<span class="number">2</span>;</span>
</code></pre><h3 id="定义条件和处理程序">定义条件和处理程序</h3><blockquote>
<p>是事先定义程序执行过程中可能遇到的问题。并且可以在处理程序中定义解决这些问题的办法。这种方式可以提前预测可能出现的问题，并提出解决办法。mysql中都是通过declare关键字来定义条件和处理程序。</p>
</blockquote>
<p>定义条件:</p>
<pre><code><span class="operator"><span class="keyword">declare</span> condion_name condition <span class="keyword">for</span> condition_value
condition_value;</span>
</code></pre><p>条件值可以用：sqlstate[value]sqlstate_value|mysql_error_code</p>
<p>下面定义Error 1146(42s02)这个错误，名称为can_not_find,可以用两种不同的<br>方式定义：</p>
<pre><code><span class="number">1.</span><span class="keyword">declare</span> can_not_find condition <span class="keyword">for</span> sqlstate <span class="string">'42s02'</span>;
<span class="number">2.</span><span class="keyword">declare</span> can_not_find condition <span class="keyword">for</span> <span class="number">1146</span>;
</code></pre><p>定义处理程序：</p>
<pre><code><span class="built_in">declare</span> handler_<span class="built_in">type</span> handler <span class="keyword">for</span> condition_value[,..]sp_stateement
handler_<span class="built_in">type</span>
   <span class="built_in">continue</span>|<span class="built_in">exit</span>|undo
condition_value:
   sqlstate[value]sqlstate_value|condition_name|sqlwarnin|notfound|
   sqlexception|mysql_error_code
</code></pre><p>下面定义处理程序的几种方式代码如下</p>
<ol>
<li><p>捕获sqlstate_value</p>
<pre><code><span class="operator"><span class="keyword">declare</span> <span class="keyword">continue</span> <span class="keyword">handler</span> <span class="keyword">for</span> <span class="keyword">sqlstate</span> <span class="string">'42s02'</span> <span class="keyword">set</span> @info=<span class="string">'can not find'</span>;</span>
</code></pre></li>
<li><p>捕获mysql_error_code</p>
<p> declare continue handler for 1146 set @info=’can not find’;</p>
</li>
<li><p>先定义条件，然后调用</p>
<p> declare can_not_find condition for 1146;<br>  declare continue handler for can_not_find set @info=’can not find’;</p>
</li>
<li><p>使用sqlwarning</p>
<p> declare exit handler for sqlwarning set @info=’error’;</p>
</li>
<li><p>使用not found</p>
<p> declare exit handler for notfound set @info=’can not find’;</p>
</li>
<li><p>使用sqlexception</p>
<p> declare exit handler for sqlexception set @info=’can not find’</p>
</li>
</ol>
<h3 id="光标的使用">光标的使用</h3><blockquote>
<p>查询语句可能查询出多条记录，在存储过程和存储函数中使用光标来逐条读取查询结果集中的记录。有些书将光标称为游标。光标的使用声明在处理程序之前，并且声明在变量和条件之后。  </p>
</blockquote>
<ol>
<li><p>声明光标</p>
<p> declare cur_employee CURSOR for select name,age from employee;</p>
</li>
<li><p>打开光标</p>
<p> open cur_employee;</p>
</li>
<li><p>使用光标</p>
<p> fetch cur_employee into emp_name,emp_age;</p>
</li>
<li><p>关闭光标</p>
<p> close cur_employee;</p>
</li>
</ol>
<h3 id="流程控制的使用">流程控制的使用</h3><blockquote>
<p>存储过程和存储函数中可以使用流程控制来控制语句的执行。mysql中可以使用if语句，case语句，loop语句，leave语句，aterate语句，repeat语句，while语句来进行流程控制。</p>
</blockquote>
<ol>
<li><p>if语句</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">if search_condition then statement_list</div><div class="line">    [elseif search_condition then statement_list]...</div><div class="line">    [else statement_list]</div><div class="line">end if</div></pre></td></tr></table></figure>
<p> 示例:</p>
<pre><code><span class="keyword">if</span> age&gt;<span class="number">20</span> set <span class="property">@count1</span>=<span class="property">@count1</span>+<span class="number">1</span>;
  elseif age=<span class="number">20</span> <span class="keyword">then</span> <span class="property">@count2</span>=<span class="property">@count2</span>+<span class="number">1</span>;
  <span class="keyword">else</span> <span class="property">@count3</span>=<span class="property">@count3</span>+<span class="number">1</span>
</code></pre></li>
<li><p>case语句</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">case case_value</div><div class="line">     where when_value then statement_list;</div><div class="line">     [when when_value then statement_list]...</div><div class="line">     [else statement_list]</div><div class="line">end case;</div></pre></td></tr></table></figure>
<p> 示例 case age</p>
<pre><code>   <span class="keyword">when</span> <span class="number">20</span> <span class="keyword">then</span> set <span class="variable">@count1</span>=<span class="variable">@count1</span>+<span class="number">1</span>;
   <span class="keyword">else</span> set <span class="variable">@count2</span>=<span class="variable">@count2</span>+<span class="number">1</span>;
<span class="keyword">end</span> <span class="keyword">case</span>;
</code></pre></li>
<li><p>loop</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[begin_label]loop</div><div class="line">       statement_list</div><div class="line">   end loop [end_label]</div></pre></td></tr></table></figure>
<p> 示例</p>
<pre><code>add_num:loop
   <span class="operator"><span class="keyword">set</span> @<span class="keyword">count</span>=@<span class="keyword">count</span>+<span class="number">1</span>;</span>
    <span class="operator"><span class="keyword">end</span> loop add_num;</span>
</code></pre></li>
<li><p>leave语句  跳出循环</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">add_num:loop</div><div class="line"> set @count=@count+1;</div><div class="line"> if @count=100 then</div><div class="line">     leave add_num;</div><div class="line">end loop add_num;</div></pre></td></tr></table></figure>
</li>
<li><p>iterate语句 跳出本次循环</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">add_num:loop</div><div class="line">  set @count=@count+1;</div><div class="line">  if @count=100 then</div><div class="line">     leave add_num;</div><div class="line"> else if mod(@count,3)=0 then</div><div class="line">    iterate add_num;</div><div class="line"> select * from employee;</div><div class="line">end loop add_num;</div></pre></td></tr></table></figure>
</li>
<li><p>repeat</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[begin_label]repeat</div><div class="line">   statement_list</div><div class="line">  until search_condition</div><div class="line">end repeat [end_label]</div></pre></td></tr></table></figure>
<p> 示例:</p>
<pre><code><span class="keyword">repeat</span> <span class="keyword">set</span> @<span class="command">count</span>=@<span class="command">count</span>+<span class="number">1</span>;
   <span class="keyword">until</span> @<span class="command">count</span>=<span class="number">100</span>;
  <span class="keyword">end</span> <span class="keyword">repeat</span>;
</code></pre></li>
<li><p>while语句</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[begin_label]while serch_condition do</div><div class="line">        statement_list</div><div class="line"> end while</div></pre></td></tr></table></figure>
<p> 示例:</p>
<pre><code><span class="keyword">while</span> <span class="annotation">@conte</span>&lt;<span class="number">100</span> <span class="keyword">do</span>
  <span class="literal">set</span> <span class="annotation">@count</span>=<span class="annotation">@count</span>+<span class="number">1</span>
  end <span class="keyword">while</span>;
</code></pre></li>
</ol>
<h3 id="调用存储过程和函数">调用存储过程和函数</h3><ol>
<li><p>调用存储过程后，数据库将执行存储过程中的语句。然后将结果返回给输出值</p>
<p>   call sp_name([parameter[,…]]);<br>   call num_from_employee(1002,@n);<br>   select @n;</p>
</li>
<li><p>调用存储函数</p>
<p> select name_from_employee(3);</p>
</li>
</ol>
<h3 id="查看存储过程和函数">查看存储过程和函数</h3><blockquote>
<p>用户可以通过show status语句来查看存储过程和函数的状态。也可通过show create 语句来查看存储过程和函数的定义。用户也可通过查询information_schema数据库下的routines表来查看存储过程和函数的信息。<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">show &#123;procedure|function&#125; status[like &apos;pattern&apos;];</div></pre></td></tr></table></figure></p>
</blockquote>
<p>后面like ‘pattern’参数用来匹配存储过程和函数的名称</p>
<pre><code>show <span class="function"><span class="keyword">procedure</span> <span class="title">status</span> <span class="title">like</span> '<span class="title">num_from_employee</span>'\<span class="title">G</span>

<span class="title">show</span> <span class="title">create</span> <span class="comment">{procedure|function}</span><span class="title">sp_name</span>;</span>

show <span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">num_from_employee</span>;</span>
</code></pre><h3 id="修改存储过程和函数">修改存储过程和函数</h3><p>alter procedure语句来修改存储过程，通过alter function语句来修改存储函数<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">alter &#123;procedure|function&#125;sp_name [characteristic...]</div><div class="line">     characteristic:</div><div class="line">    &#123; contains sql | no sql | reads sql data | modifies sql data &#125;</div><div class="line">     | sql security&#123;definer| invoker&#125;</div><div class="line">     | comment &apos;string&apos;</div></pre></td></tr></table></figure></p>
<p>下面修改存储过程num_from_employee的定义，将读写权限改为modifiel sql data并指明调用者可以执行。</p>
<pre><code>alter <span class="function"><span class="keyword">procedure</span> <span class="title">num_from_employee</span>
     <span class="title">modifies</span> <span class="title">sql</span> <span class="title">data</span>
     <span class="title">sql</span> <span class="title">security</span> <span class="title">invoker</span>;</span>
</code></pre><p>下面修改存储函数name_from_employee的定义。将读写权限必为reads sql data并加上注释信息‘find name’</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">function</span> name_from_employ
    reads <span class="keyword">sql</span> <span class="keyword">data</span>
    comment <span class="string">'find name'</span>;</span>
</code></pre><h3 id="删除存储过程和函数">删除存储过程和函数</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">drop &#123;procedure|function&#125; fp_name;</div></pre></td></tr></table></figure>
<h2 id="删除数据">删除数据</h2><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">delete from 表名[where 条件表达式];</div></pre></td></tr></table></figure>
<p>联表删除: 可以通过外键查询到所在表，然后删除</p>
<h1 id="数据控制语言DCL">数据控制语言DCL</h1>  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/数据库/">数据库</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/技术/">技术</a><a href="/tags/数据库/">数据库</a><a href="/tags/sql/">sql</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://wn398.github.io/2012/10/18/database/SQL综合整理/" data-title="SQL综合整理 | 自由之翼" data-tsina="tim398" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2012/10/20/UML关系/" title="UML关系">
  <strong>上一篇：</strong><br/>
  <span>
  UML关系</span>
</a>
</div>


</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2012/10/18/database/SQL综合整理/" data-title="SQL综合整理" data-url="http://wn398.github.io/2012/10/18/database/SQL综合整理/"></div>
</section>


</div>
<script src="/js/snowstorm-min.js"></script>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#数据定义语言DDL"><span class="toc-number">1.</span> <span class="toc-text">数据定义语言DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建数据库"><span class="toc-number">1.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除数据库"><span class="toc-number">1.2.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建数据库表"><span class="toc-number">1.3.</span> <span class="toc-text">创建数据库表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#外键"><span class="toc-number">1.3.1.</span> <span class="toc-text">外键</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看表结构"><span class="toc-number">1.4.</span> <span class="toc-text">查看表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看表的详细定义"><span class="toc-number">1.5.</span> <span class="toc-text">查看表的详细定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改表结构"><span class="toc-number">1.6.</span> <span class="toc-text">修改表结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表名"><span class="toc-number">1.6.1.</span> <span class="toc-text">修改表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表字段数据类型"><span class="toc-number">1.6.2.</span> <span class="toc-text">修改表字段数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表字段名称"><span class="toc-number">1.6.3.</span> <span class="toc-text">修改表字段名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为表添加新字段"><span class="toc-number">1.6.4.</span> <span class="toc-text">为表添加新字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除字段"><span class="toc-number">1.6.5.</span> <span class="toc-text">删除字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改字段的排列位置"><span class="toc-number">1.6.6.</span> <span class="toc-text">修改字段的排列位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表的存储引擎"><span class="toc-number">1.6.7.</span> <span class="toc-text">修改表的存储引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除表的外键约束"><span class="toc-number">1.6.8.</span> <span class="toc-text">删除表的外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除表"><span class="toc-number">1.6.9.</span> <span class="toc-text">删除表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#索引"><span class="toc-number">1.7.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建索引"><span class="toc-number">1.7.1.</span> <span class="toc-text">创建索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表时直接创建索引"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">创建表时直接创建索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在存在的表上创建索引"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">在存在的表上创建索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用alter_table_语句来创建索引"><span class="toc-number">1.7.1.3.</span> <span class="toc-text">使用alter table 语句来创建索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除索引"><span class="toc-number">1.7.2.</span> <span class="toc-text">删除索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图"><span class="toc-number">1.8.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建视图"><span class="toc-number">1.8.1.</span> <span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看视图"><span class="toc-number">1.8.2.</span> <span class="toc-text">查看视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改视图"><span class="toc-number">1.8.3.</span> <span class="toc-text">修改视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新视图"><span class="toc-number">1.8.4.</span> <span class="toc-text">更新视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不能更新的视图分类："><span class="toc-number">1.8.5.</span> <span class="toc-text">不能更新的视图分类：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除视图"><span class="toc-number">1.8.6.</span> <span class="toc-text">删除视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#触发器"><span class="toc-number">1.9.</span> <span class="toc-text">触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建触发器"><span class="toc-number">1.9.1.</span> <span class="toc-text">创建触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看触发器"><span class="toc-number">1.9.2.</span> <span class="toc-text">查看触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#触发器的使用"><span class="toc-number">1.9.3.</span> <span class="toc-text">触发器的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除触发器"><span class="toc-number">1.9.4.</span> <span class="toc-text">删除触发器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据操作语言DML"><span class="toc-number">2.</span> <span class="toc-text">数据操作语言DML</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据查询"><span class="toc-number">2.1.</span> <span class="toc-text">数据查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查询语句的基本语法"><span class="toc-number">2.1.1.</span> <span class="toc-text">查询语句的基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在单表上查询数据"><span class="toc-number">2.1.2.</span> <span class="toc-text">在单表上查询数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用聚合函数查询数据"><span class="toc-number">2.1.3.</span> <span class="toc-text">使用聚合函数查询数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多表上联合查询"><span class="toc-number">2.1.4.</span> <span class="toc-text">多表上联合查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#内连接查询"><span class="toc-number">2.1.4.1.</span> <span class="toc-text">内连接查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#外连接查询"><span class="toc-number">2.1.4.2.</span> <span class="toc-text">外连接查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#复合条件查询"><span class="toc-number">2.1.4.3.</span> <span class="toc-text">复合条件查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#子查询"><span class="toc-number">2.1.5.</span> <span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用正则表达式查询"><span class="toc-number">2.1.6.</span> <span class="toc-text">使用正则表达式查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询综合实例"><span class="toc-number">2.1.7.</span> <span class="toc-text">查询综合实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#插入数据"><span class="toc-number">2.2.</span> <span class="toc-text">插入数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更新数据"><span class="toc-number">2.3.</span> <span class="toc-text">更新数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#存储过程和函数"><span class="toc-number">2.4.</span> <span class="toc-text">存储过程和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建存储过程"><span class="toc-number">2.4.1.</span> <span class="toc-text">创建存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建存储函数"><span class="toc-number">2.4.2.</span> <span class="toc-text">创建存储函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变量的使用"><span class="toc-number">2.4.3.</span> <span class="toc-text">变量的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义条件和处理程序"><span class="toc-number">2.4.4.</span> <span class="toc-text">定义条件和处理程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#光标的使用"><span class="toc-number">2.4.5.</span> <span class="toc-text">光标的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#流程控制的使用"><span class="toc-number">2.4.6.</span> <span class="toc-text">流程控制的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#调用存储过程和函数"><span class="toc-number">2.4.7.</span> <span class="toc-text">调用存储过程和函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看存储过程和函数"><span class="toc-number">2.4.8.</span> <span class="toc-text">查看存储过程和函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改存储过程和函数"><span class="toc-number">2.4.9.</span> <span class="toc-text">修改存储过程和函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除存储过程和函数"><span class="toc-number">2.4.10.</span> <span class="toc-text">删除存储过程和函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除数据"><span class="toc-number">2.5.</span> <span class="toc-text">删除数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据控制语言DCL"><span class="toc-number">3.</span> <span class="toc-text">数据控制语言DCL</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  <div>
<script charset="Shift_JIS" src="http://chabudai.sakura.ne.jp/blogparts/honehoneclock/honehone_clock_wh.js"></script>
</div>


  <div class="music">
<!--<p class="asidetitle">Music</p>-->
<div class="music_player clearfix">
<script type="text/javascript" src="http://www.xiami.com/widget/player-single?uid=45521081&sid=381307&mode=js"></script>
</div>
</div>

  
<div class="categorieslist">
<p class="asidetitle">近期文章</p>
  <ul class="entry">
    
      <li>
        <a href="/2016/09/14/git常用命令总结/">git常用命令总结</a>
      </li>
    
      <li>
        <a href="/2015/06/01/VI的使用/">VI的使用</a>
      </li>
    
      <li>
        <a href="/2015/05/02/CSS/">CSS</a>
      </li>
    
  </ul>
</div>


  
<div class="categorieslist">
<p class="asidetitle">近期更新</p>
  <ul class="entry">
    
      <li>
        <a href="/2016/09/14/git常用命令总结/">git常用命令总结</a>
      </li>
    
      <li>
        <a href="/2015/06/01/VI的使用/">VI的使用</a>
      </li>
    
      <li>
        <a href="/2015/05/02/CSS/">CSS</a>
      </li>
    
      <li>
        <a href="/2015/04/26/html5/">HTML5</a>
      </li>
    
      <li>
        <a href="/2015/04/13/Java7的一些新特性/">Java7的一些新特性</a>
      </li>
    
  </ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/技术/" title="技术">技术<sup>44</sup></a></li>
		
			<li><a href="/tags/android/" title="android">android<sup>17</sup></a></li>
		
			<li><a href="/tags/android-UI/" title="android_UI">android_UI<sup>6</sup></a></li>
		
			<li><a href="/tags/前端/" title="前端">前端<sup>5</sup></a></li>
		
			<li><a href="/tags/数据库/" title="数据库">数据库<sup>3</sup></a></li>
		
			<li><a href="/tags/JS/" title="JS">JS<sup>2</sup></a></li>
		
			<li><a href="/tags/linux/" title="linux">linux<sup>2</sup></a></li>
		
			<li><a href="/tags/字节码/" title="字节码">字节码<sup>2</sup></a></li>
		
			<li><a href="/tags/hibernate/" title="hibernate">hibernate<sup>1</sup></a></li>
		
			<li><a href="/tags/git/" title="git">git<sup>1</sup></a></li>
		
			<li><a href="/tags/并发/" title="并发">并发<sup>1</sup></a></li>
		
			<li><a href="/tags/实例/" title="实例">实例<sup>1</sup></a></li>
		
			<li><a href="/tags/项目构建/" title="项目构建">项目构建<sup>1</sup></a></li>
		
			<li><a href="/tags/maven/" title="maven">maven<sup>1</sup></a></li>
		
			<li><a href="/tags/css/" title="css">css<sup>1</sup></a></li>
		
			<li><a href="/tags/grails/" title="grails">grails<sup>1</sup></a></li>
		
			<li><a href="/tags/html/" title="html">html<sup>1</sup></a></li>
		
			<li><a href="/tags/ssh2/" title="ssh2">ssh2<sup>1</sup></a></li>
		
			<li><a href="/tags/依赖注入/" title="依赖注入">依赖注入<sup>1</sup></a></li>
		
			<li><a href="/tags/spring/" title="spring">spring<sup>1</sup></a></li>
		
			<li><a href="/tags/CSS/" title="CSS">CSS<sup>1</sup></a></li>
		
			<li><a href="/tags/Java新特性/" title="Java新特性">Java新特性<sup>1</sup></a></li>
		
			<li><a href="/tags/JDK/" title="JDK">JDK<sup>1</sup></a></li>
		
			<li><a href="/tags/NoSQL/" title="NoSQL">NoSQL<sup>1</sup></a></li>
		
			<li><a href="/tags/mysql/" title="mysql">mysql<sup>1</sup></a></li>
		
			<li><a href="/tags/sql/" title="sql">sql<sup>1</sup></a></li>
		
			<li><a href="/tags/groovy/" title="groovy">groovy<sup>1</sup></a></li>
		
			<li><a href="/tags/UML/" title="UML">UML<sup>1</sup></a></li>
		
			<li><a href="/tags/传感器/" title="传感器">传感器<sup>1</sup></a></li>
		
			<li><a href="/tags/蓝牙/" title="蓝牙">蓝牙<sup>1</sup></a></li>
		
			<li><a href="/tags/NFC/" title="NFC">NFC<sup>1</sup></a></li>
		
			<li><a href="/tags/多媒体/" title="多媒体">多媒体<sup>1</sup></a></li>
		
			<li><a href="/tags/定位/" title="定位">定位<sup>1</sup></a></li>
		
			<li><a href="/tags/数据持久化/" title="数据持久化">数据持久化<sup>1</sup></a></li>
		
			<li><a href="/tags/语音识别/" title="语音识别">语音识别<sup>1</sup></a></li>
		
			<li><a href="/tags/wifi网络/" title="wifi网络">wifi网络<sup>1</sup></a></li>
		
		</ul>
</div>


  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/JS/" title="JS">JS<sup>2</sup></a></li>
		
			<li><a href="/categories/JVM/" title="JVM">JVM<sup>2</sup></a></li>
		
			<li><a href="/categories/JavaSE/" title="JavaSE">JavaSE<sup>3</sup></a></li>
		
			<li><a href="/categories/android/" title="android">android<sup>23</sup></a></li>
		
			<li><a href="/categories/grails/" title="grails">grails<sup>1</sup></a></li>
		
			<li><a href="/categories/linux/" title="linux">linux<sup>1</sup></a></li>
		
			<li><a href="/categories/ssh2/" title="ssh2">ssh2<sup>3</sup></a></li>
		
			<li><a href="/categories/前端/" title="前端">前端<sup>3</sup></a></li>
		
			<li><a href="/categories/技术辅助/" title="技术辅助">技术辅助<sup>3</sup></a></li>
		
			<li><a href="/categories/操作系统/" title="操作系统">操作系统<sup>1</sup></a></li>
		
			<li><a href="/categories/数据库/" title="数据库">数据库<sup>3</sup></a></li>
		
		</ul>
</div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">标签云</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/JDK/" style="font-size: 10px;">JDK</a> <a href="/tags/JS/" style="font-size: 11.67px;">JS</a> <a href="/tags/Java新特性/" style="font-size: 10px;">Java新特性</a> <a href="/tags/NFC/" style="font-size: 10px;">NFC</a> <a href="/tags/NoSQL/" style="font-size: 10px;">NoSQL</a> <a href="/tags/UML/" style="font-size: 10px;">UML</a> <a href="/tags/android/" style="font-size: 18.33px;">android</a> <a href="/tags/android-UI/" style="font-size: 16.67px;">android_UI</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/grails/" style="font-size: 10px;">grails</a> <a href="/tags/groovy/" style="font-size: 10px;">groovy</a> <a href="/tags/hibernate/" style="font-size: 10px;">hibernate</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/linux/" style="font-size: 11.67px;">linux</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/ssh2/" style="font-size: 10px;">ssh2</a> <a href="/tags/wifi网络/" style="font-size: 10px;">wifi网络</a> <a href="/tags/传感器/" style="font-size: 10px;">传感器</a> <a href="/tags/依赖注入/" style="font-size: 10px;">依赖注入</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/多媒体/" style="font-size: 10px;">多媒体</a> <a href="/tags/字节码/" style="font-size: 11.67px;">字节码</a> <a href="/tags/定位/" style="font-size: 10px;">定位</a> <a href="/tags/实例/" style="font-size: 10px;">实例</a> <a href="/tags/并发/" style="font-size: 10px;">并发</a> <a href="/tags/技术/" style="font-size: 20px;">技术</a> <a href="/tags/数据库/" style="font-size: 13.33px;">数据库</a> <a href="/tags/数据持久化/" style="font-size: 10px;">数据持久化</a> <a href="/tags/蓝牙/" style="font-size: 10px;">蓝牙</a> <a href="/tags/语音识别/" style="font-size: 10px;">语音识别</a> <a href="/tags/项目构建/" style="font-size: 10px;">项目构建</a>
    </div>
  </div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">归档</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">一月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">十月 2012</a><span class="archive-list-count">2</span></li></ul>
  </div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.cnblogs.com/wn398/" target="_blank" title="博客园">博客园</a>
            
          </li>
        
    </ul>
</div>

  
  <div class="widget">
    <p class="asidetitle">最近访客</p>
    <div class="widget">
	  <ul class="ds-recent-visitors" id="ds-recent-visitors" data-num-items="12"></ul>
	</div>
  </div>


  
<div class="widget">
  <p class="asidetitle">最近评论</p>
    
<ul class="entry ds-recent-comments" data-num-items="8" data-show-avatars="0" data-show-time="1" data-show-admin="1" data-excerpt-length="70"></ul>
</div>


  <div>
<script type="text/javascript" src="//rj.revolvermaps.com/0/0/1.js?i=9cw5wlpmvk8&amp;m=7&amp;s=220&amp;c=e63100" async="async"></script>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" > <!--id="footer"-->
	
	<div class="line">
		<span></span>
		<div class="author" id="author"></div>
	</div>
	
	<div>
	
	<section class="info">
		<p> If you don&#39;t have never failed,you never try anything new <br/>
			       ╰︶﹉⋛⋋⊱⋋๑理想๑⋌⊰⋌⋚﹉︶╯</p>
	</section>
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/tim398" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/wn398" target="_blank" class="icon-github" title="github"></a>
		
		
		<a href="http://stackoverflow.com/users/4404127/tim" target="_blank" class="icon-stack-overflow" title="stackoverflow"></a>
		
		
		<a href="https://twitter.com/wn1698" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/100009152177427" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		<a href="https://www.linkedin.com/in/292267941" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		<a href="https://www.douban.com/people/wn398" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="https://www.zhihu.com/people/ding-ding-mu-mu" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		<a href="https://plus.google.com/108412565662276580000?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:164878858@qq.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
	 
	
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a>© 2016 
		
		<a href="http://wn398.github.io/about" target="_blank" title="Tim Wang">Tim Wang</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"wn398"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

  </body>
</html>
